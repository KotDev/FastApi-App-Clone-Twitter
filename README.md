
![Logo](https://i.pinimg.com/564x/62/d5/f7/62d5f72202c8bb96a2b77227c8061af0.jpg)


# Clone Twitter (Pet-project)

 


## Описание проекта

Данный проект является малой версией Twitter при этом имеет ограниченный функционал, который разработан в учебных целях. В основном это обычное CRUD приложение. Так же проект является итоговой работой в курсе Python advanced от онлайн школы SkillBox




### Функции реализованные в данном проекте

- Создать / Удалить пользователя
- Создать / Удалить твит с вложенным фото
- Поставить / Удаилть лайк
- Подписаться / Отписаться от пользователя
- Просмотреть ленту твитов




### Стек технологий
**Client:** JS, CSS.

**Server:** Python 3.10, FastAPI, Pydantyc, SqlAlchemy, asynco,  Pydantyc-Settings, functools.

**DataBase**: Postgres, asyncpg.

**Tests**: Pytest, Pytest-asyncio, aiohttp.

**Linteres**: Black.



## Пример API
#### 

Все поинты сервиса можно узнать по запросу:
```http
  http//:0.0.0.0:8000/docs#/
```

### Примеры некоторых поинтов API

```http
  GET /api/users/me
```

| Headers   | Type     | Description                |
| :-------- | :------- | :------------------------- |
| `api-key` | `string` | **Required**. API ключ пользователя |

#### Get item

```http
  POST | DELETE /api/tweet/{tweet_id}/like
```

| Parameter | Type     | Description                       |
| :-------- | :------- | :-------------------------------- |
| `tweet_id`      | `string` | **Required**. id твита который создал пользователь |




## Запуск приложения и тестов

Приложения и тесты можно запустить через docker-compose или напрямую

### Запуск через docker-compose

```bash
  cd your-repository
  docker-compose up -d
```

При запуске контейнера автоматически запускается тесты к приложению PS: Тесты могут упасть для этого необходимо перезапустить контейнер с приложением и опять запустить контейнер с тестами. Простите я не DEVOPS)))

Далее переходим по http//:0.0.0.0:8000 и попадаем на главную страницу под профилем тестового поьзователя. Если мы хотим зайти под другим пользователем, то необходимо создать пользователя и использовать его api ключ

![app_image](https://i.postimg.cc/Qt24Nd3n/1.png)

### Запуск напрямую

Для запуска напрямую необходимо ввести некоторые корректировки в код приложения

```bash
  cd your-repository/src/settings/config.py
```

Меняем значение в переменной db_url на нужный url базы данных которую вы будете использовать

Устанавливаем все зависимости
```bash
  pip install poetry
  poetry install
```

Запускаем приложение
```bash
  python app.py
```
И переходим по нашему хосту приложения.

Теперь мы можем запустить тесты к нашему приложению. Переходим по 
```bash
  cd your-repository/tests/test_api/conftest.py
```
меняем в файле BASE_URL на хост на котором работает наш сервер. ВАЖНО!!!! сначала надо запустить сервер, а после тесты.
Запуск тестов
```bash
  cd your-repository/tests
  pytest test_api
```

## Автор

- [@KotDev](https://github.com/KotDev)

